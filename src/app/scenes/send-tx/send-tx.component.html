<div class="wal" [ngClass]="{'wal--sm': balance != null && balance !=''}">
  <div class="f f-j--c p-b--20">
    <div class="card">
      <form [formGroup]="privateKeyForm" (submit)="onPrivateKeySubmit()">
        <div class="uk-margin">
          <label class="uk-form-label">Enter your private key to perform operations.</label>
          <div class="uk-form-controls">
            <!--<div class="uk-inline">
              <span class="uk-form-icon uk-form-icon-flip"><i class="fas fa-eye"></i></span>-->
            <input class="uk-input" type="password" placeholder="Private Key" formControlName="privateKey">
            <!--</div>-->
          </div>
        </div>
        <div class="uk-margin" *ngIf="balance == null || balance ==''">
          <div class="center p-b--60">
            <button type="submit" class="btn btn--sm btn--round">
              <ng-container *ngIf="!isOpening; else opening;">
                Open
              </ng-container>
              <ng-template #opening>
                Opening <i class="fas fa-spinner fa-spin m-l--10"></i>
              </ng-template>
            </button>
          </div>
        </div>
      </form>
      <div class="m-t--20" *ngIf="balance != null && balance !=''">
        <p>Address for key: {{address}}</p>
        <p>Your current balance is: <span style="font-weight: bold; color: greenyellow;">{{balance | number}}</span></p>
        <p><a routerLink="/addr/{{address}}">View address</a></p>
        <button type="button" class="btn btn--sm btn--round" (click)="closeWallet()">Close wallet</button>
      </div>
    </div>
  </div>
</div>
<div class="p-b--60" *ngIf="balance != null && balance !=''">
  <app-tabs name="send_tx_tab">
    <tab name="send_go" title="Send GO">
      <tab-content>
        <h5>Perform a regular transaction, send GO to another account</h5>
        <form class="uk-form-horizontal" [formGroup]="sendGoForm">
          <div class="uk-margin">
            <label class="uk-form-label">To*:</label>
            <div class="uk-form-controls">
              <input class="uk-input" type="text" placeholder="To" formControlName="to">
            </div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label">Amount*:</label>
            <div class="uk-form-controls">
              <input class="uk-input" type="text" placeholder="Amount" formControlName="amount">
            </div>
          </div>
          <div class="uk-margin">
            <button class="btn pull-r" type="submit" (click)="sendGo()">Send</button>
          </div>
        </form>
      </tab-content>
    </tab>
    <tab name="deploy_contract" title="Deploy Contract">
      <tab-content>
        <h5>Deploy a Smart Contract to GoChain</h5>
        <form class="uk-form-horizontal" [formGroup]="deployContractForm">
          <div class="uk-margin">
            <label class="uk-form-label">Bytecode*:</label>
            <div class="uk-form-controls">
              <textarea class="uk-textarea" rows="5" formControlName="byteCode"
                        placeholder="Bytecode"></textarea>
              <p>Must start with 0x!</p>
            </div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label">Gas Limit*:</label>
            <div class="uk-form-controls">
              <input class="uk-input" placeholder="Gas Limit" formControlName="gasLimit" type="number">
            </div>
          </div>
          <div class="uk-margin">
            <button class="btn pull-r" type="submit" (click)="deployContract()">
              Deploy
            </button>
          </div>
        </form>
      </tab-content>
    </tab>
    <tab name="use_contract" title="Use Contract">
      <tab-content>
        <h5>Interact with a Smart Contract on GoChain</h5>
        <form class="uk-form-horizontal" [formGroup]="useContractForm">
          <div class="uk-margin">
            <label class="uk-form-label">Contract Address*:</label>
            <div class="uk-form-controls">
              <input class="uk-input" placeholder="Contract Address" formControlName="contractAddress">
            </div>
          </div>
          <div class="uk-margin">
            <label class="uk-form-label">ABI / JSON Interface:</label>
            <div class="uk-form-controls">
              <textarea class="uk-textarea" placeholder="ABI / JSON Interface" formControlName="contractABI"
                        rows="5"></textarea>
            </div>
          </div>
          <div *ngIf="contract != null">
            <div class="uk-margin">
              <label class="uk-form-label">Choose Contract Function</label>
              <div class="uk-form-controls">
                <select class="uk-select" formControlName="contractFunction">
                  <option *ngFor="let func of funcsToSelect()" [value]="func.name">{{func.name}}</option>
                </select>
              </div>
            </div>
            <div *ngIf="functionParameters.controls.length != null">
              <div formArrayName="functionParameters" *ngFor="let control of functionParameters.controls; let i=index">
                <div class="uk-margin">
                  <div class="uk-form-controls">
                    <input class="uk-input" placeholder="{{functionName(i)}}" formControlName="{{i}}">
                  </div>
                </div>
              </div>
              <div *ngIf="functionPayable()">
                <div class="uk-margin">
                  <div class="uk-form-controls">
                    <input class="uk-input" placeholder="Amount" formControlName="contractAmount">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="functionResult != null">
            <h3>Response</h3>
            <div *ngFor="let k of functionResult">
              {{k[0]}}: <span style="font-weight: bold;">{{k[1]}}</span>
            </div>
          </div>
          <div *ngIf="funcUnsupported != null">
            {{funcUnsupported}}
          </div>
          <div class="uk-margin">
            <button class="btn pull-r" type="submit" (click)="useContract()">
              Send
            </button>
          </div>
        </form>
      </tab-content>
    </tab>
  </app-tabs>
</div>
<ng-container *ngIf="sending || receipt != null">
  <div *ngIf="sending">
    <span>Transaction submitted, waiting for receipt...</span>
  </div>
  <div *ngIf="receipt != null">
    Transaction complete!<br/>
    TxHash: <a routerLink="/tx/{{receipt.transactionHash}}" target="_blank">{{receipt.transactionHash }}</a>
    <div *ngIf="receipt.contractAddress !== null">
      <b>Contract Address: {{ receipt.contractAddress }}</b>
    </div>
  </div>
</ng-container>
<div class="wallet-warning">
  <p>Please use this wallet in <a
      href="https://support.google.com/chrome/answer/95464?co=GENIE.Platform%3DDesktop&hl=en"
      target="_blank">Chrome Incognito Mode</a> or <a
      href="https://support.mozilla.org/en-US/kb/private-browsing-use-firefox-without-history" target="_blank">Firefox
    Private Window</a>. This will disable
    any extensions that could read your private key.</p>
</div>
